# æšä¸¾ç±»å‹è½¬æ¢ç»Ÿä¸€è¿ç§»è®¡åˆ’

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

- **åˆ›å»ºæ—¥æœŸ**: 2025-11-13
- **ä½œè€…**: KEYKB
- **ç‰ˆæœ¬**: v1.0
- **çŠ¶æ€**: å¾…æ‰§è¡Œ

---

## ğŸ¯ è¿ç§»ç›®æ ‡

å°† content æœåŠ¡ä¸­çš„æšä¸¾è‡ªåŠ¨è½¬æ¢åŠŸèƒ½æå–åˆ° siae-core å…¬å…±æ¨¡å—ï¼Œä½¿æ‰€æœ‰æœåŠ¡ï¼ˆuserã€contentã€mediaã€notificationã€authï¼‰éƒ½èƒ½å¤ç”¨ç»Ÿä¸€çš„æšä¸¾å¤„ç†æœºåˆ¶ã€‚

### æ ¸å¿ƒæ”¶ç›Š

- âœ… **ä»£ç å¤ç”¨**ï¼šå‡å°‘é‡å¤ä»£ç  80%+
- âœ… **ç»Ÿä¸€è¡Œä¸º**ï¼šæ‰€æœ‰æœåŠ¡æšä¸¾å¤„ç†ä¸€è‡´
- âœ… **æ˜“äºç»´æŠ¤**ï¼šä¿®æ”¹ä¸€å¤„ï¼Œæ‰€æœ‰æœåŠ¡ç”Ÿæ•ˆ
- âœ… **ç±»å‹å®‰å…¨**ï¼šç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯
- âœ… **API å‹å¥½**ï¼šæ”¯æŒå¯è¯»çš„å­—ç¬¦ä¸²å€¼ï¼ˆå¦‚ "article" è€Œä¸æ˜¯ 0ï¼‰

---

## ğŸ“Š å½“å‰çŠ¶æ€åˆ†æ

### Content æœåŠ¡ï¼ˆå·²å®ç°è‡ªåŠ¨è½¬æ¢ï¼‰âœ…

**å®ç°æ–¹å¼**ï¼š
- å®šä¹‰äº† `BaseEnum` æ¥å£
- å®ç°äº† URL å‚æ•°è½¬æ¢å™¨ï¼ˆ`StringToBaseEnumConverterFactory`ï¼‰
- å®ç°äº† JSON åºåˆ—åŒ–/ååºåˆ—åŒ–å™¨ï¼ˆ`BaseEnumSerializer/Deserializer`ï¼‰
- é…ç½®äº† Jackson æ¨¡å—ï¼ˆ`EnumModule`ï¼‰

**æšä¸¾ç±»å‹**ï¼š
- `ContentTypeEnum` (0-article, 1-note, 2-question, 3-file, 4-video)
- `ActionTypeEnum` (0-view, 1-like, 2-favorite, 3-report)
- `TypeEnum` (ç›®æ ‡ç±»å‹)
- å„ç§ Status æšä¸¾

### User æœåŠ¡ï¼ˆä½¿ç”¨æ‰‹åŠ¨è½¬æ¢ï¼‰âŒ

**é—®é¢˜**ï¼š
- å®ä½“ç±»å’Œ DTO ä½¿ç”¨ `Integer` ç±»å‹
- æšä¸¾ç±»æœ‰ `fromCode()` æ–¹æ³•ä½†æœªä½¿ç”¨
- VO ä¸­æ‰‹åŠ¨æ‹¼æ¥çŠ¶æ€åç§°

**æšä¸¾ç±»å‹**ï¼š
- `LifecycleStatusEnum` (0-å€™é€‰æˆå‘˜, 1-æ­£å¼æˆå‘˜)
- `MemberTypeEnum` (0-éåä¼šæˆå‘˜, 1-åä¼šæˆå‘˜)
- `ClassUserStatusEnum` (1-åœ¨è¯», 2-ç¦»æ ¡)

### å…¶ä»–æœåŠ¡

- **Media æœåŠ¡**ï¼šå¾…æ£€æŸ¥
- **Notification æœåŠ¡**ï¼šå¾…æ£€æŸ¥
- **Auth æœåŠ¡**ï¼šå¾…æ£€æŸ¥

---

## ğŸ“¦ è¿ç§»è®¡åˆ’è¯¦ç»†æ­¥éª¤


### é˜¶æ®µä¸€ï¼šåœ¨ siae-core ä¸­åˆ›å»ºæšä¸¾åŸºç¡€è®¾æ–½

#### 1.1 ç›®å½•ç»“æ„

```
siae-core/src/main/java/com/hngy/siae/core/
â”œâ”€â”€ enums/
â”‚   â”œâ”€â”€ BaseEnum.java                    # ã€æ–°å»ºã€‘æšä¸¾åŸºç¡€æ¥å£
â”‚   â”œâ”€â”€ RequestSource.java               # ã€å·²å­˜åœ¨ã€‘ä¿æŒä¸å˜
â”‚   â””â”€â”€ StatusEnum.java                  # ã€å·²å­˜åœ¨ã€‘ä¿æŒä¸å˜
â”œâ”€â”€ converter/
â”‚   â””â”€â”€ StringToBaseEnumConverterFactory.java  # ã€æ–°å»ºã€‘URLå‚æ•°/è¡¨å•è½¬æ¢å™¨
â””â”€â”€ jackson/
    â”œâ”€â”€ BaseEnumDeserializer.java        # ã€æ–°å»ºã€‘JSONååºåˆ—åŒ–å™¨
    â”œâ”€â”€ BaseEnumSerializer.java          # ã€æ–°å»ºã€‘JSONåºåˆ—åŒ–å™¨
    â””â”€â”€ EnumModule.java                  # ã€æ–°å»ºã€‘Jacksonæ¨¡å—æ³¨å†Œ
```

#### 1.2 éœ€è¦åˆ›å»ºçš„æ–‡ä»¶

**æ–‡ä»¶ 1: BaseEnum.java**

è·¯å¾„ï¼š`siae-core/src/main/java/com/hngy/siae/core/enums/BaseEnum.java`

```java
package com.hngy.siae.core.enums;

/**
 * æšä¸¾åŸºç¡€æ¥å£
 * æ‰€æœ‰ä¸šåŠ¡æšä¸¾éƒ½åº”è¯¥å®ç°æ­¤æ¥å£
 * 
 * @author KEYKB
 */
public interface BaseEnum {
    /**
     * è·å–æšä¸¾ç¼–ç 
     */
    int getCode();
    
    /**
     * è·å–æšä¸¾æè¿°
     */
    String getDescription();

    /**
     * æ ¹æ® code è·å–æšä¸¾å®ä¾‹
     */
    static <T extends Enum<T> & BaseEnum> T fromCode(Class<T> clazz, int code) {
        for (T e : clazz.getEnumConstants()) {
            if (e.getCode() == code) {
                return e;
            }
        }
        return null;
    }

    /**
     * æ ¹æ®æè¿°è·å–æšä¸¾å®ä¾‹
     */
    static <T extends Enum<T> & BaseEnum> T fromDesc(Class<T> clazz, String desc) {
        for (T e : clazz.getEnumConstants()) {
            if (e.getDescription().equals(desc)) {
                return e;
            }
        }
        return null;
    }
}
```


**æ–‡ä»¶ 2: StringToBaseEnumConverterFactory.java**

è·¯å¾„ï¼š`siae-core/src/main/java/com/hngy/siae/core/converter/StringToBaseEnumConverterFactory.java`

```java
package com.hngy.siae.core.converter;

import com.hngy.siae.core.enums.BaseEnum;
import org.springframework.core.convert.converter.Converter;
import org.springframework.core.convert.converter.ConverterFactory;
import org.springframework.stereotype.Component;

/**
 * å­—ç¬¦ä¸²åˆ°æšä¸¾çš„è½¬æ¢å™¨å·¥å‚
 * ç”¨äºå¤„ç† URL å‚æ•°å’Œè¡¨å•æ•°æ®
 * æ”¯æŒé€šè¿‡ code æˆ– description è½¬æ¢
 * 
 * @author KEYKB
 */
@Component
public class StringToBaseEnumConverterFactory implements ConverterFactory<String, BaseEnum> {

    @SuppressWarnings({"unchecked", "rawtypes"})
    @Override
    public <T extends BaseEnum> Converter<String, T> getConverter(Class<T> targetType) {
        return new StringToBaseEnumConverter(targetType);
    }

    private record StringToBaseEnumConverter<T extends BaseEnum>(Class<T> enumType) 
            implements Converter<String, T> {

        @Override
        public T convert(String source) {
            // å°è¯•æŒ‰ code è½¬æ¢
            try {
                int code = Integer.parseInt(source);
                T result = BaseEnum.fromCode(enumType, code);
                if (result != null) {
                    return result;
                }
            } catch (NumberFormatException ignored) {
            }

            // å°è¯•æŒ‰ description è½¬æ¢
            T result = BaseEnum.fromDesc(enumType, source);
            if (result != null) {
                return result;
            }

            throw new IllegalArgumentException(
                "æ— æ³•å°† '" + source + "' è½¬æ¢ä¸ºæšä¸¾ç±»å‹: " + enumType.getName()
            );
        }
    }
}
```


**æ–‡ä»¶ 3: BaseEnumDeserializer.java**

è·¯å¾„ï¼š`siae-core/src/main/java/com/hngy/siae/core/jackson/BaseEnumDeserializer.java`

```java
package com.hngy.siae.core.jackson;

import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.databind.DeserializationContext;
import com.fasterxml.jackson.databind.JsonDeserializer;
import com.hngy.siae.core.enums.BaseEnum;

import java.io.IOException;

/**
 * é€šç”¨æšä¸¾ååºåˆ—åŒ–å™¨
 * æ”¯æŒ code å’Œ description ä¸¤ç§ååºåˆ—åŒ–æ–¹å¼
 * 
 * @author KEYKB
 */
public class BaseEnumDeserializer<T extends Enum<T> & BaseEnum> extends JsonDeserializer<T> {

    private final Class<T> enumClass;

    public BaseEnumDeserializer(Class<T> enumClass) {
        this.enumClass = enumClass;
    }

    @Override
    public T deserialize(JsonParser p, DeserializationContext ctxt) throws IOException {
        String value = p.getText();

        // å°è¯•å…ˆæŒ‰ code æŸ¥æ‰¾
        try {
            int code = Integer.parseInt(value);
            T result = BaseEnum.fromCode(enumClass, code);
            if (result != null) {
                return result;
            }
        } catch (NumberFormatException ignored) {
        }

        // å†å°è¯•æŒ‰ description æŸ¥æ‰¾
        T result = BaseEnum.fromDesc(enumClass, value);
        if (result != null) {
            return result;
        }

        throw new IllegalArgumentException(
            "æ— æ³•è§£ææšä¸¾å€¼: '" + value + "' for enum class: " + enumClass.getName()
        );
    }
}
```

**æ–‡ä»¶ 4: BaseEnumSerializer.java**

è·¯å¾„ï¼š`siae-core/src/main/java/com/hngy/siae/core/jackson/BaseEnumSerializer.java`

```java
package com.hngy.siae.core.jackson;

import com.fasterxml.jackson.core.JsonGenerator;
import com.fasterxml.jackson.databind.JsonSerializer;
import com.fasterxml.jackson.databind.SerializerProvider;
import com.hngy.siae.core.enums.BaseEnum;

import java.io.IOException;

/**
 * é€šç”¨æšä¸¾åºåˆ—åŒ–å™¨
 * å°†æšä¸¾åºåˆ—åŒ–ä¸º description å­—ç¬¦ä¸²
 * 
 * @author KEYKB
 */
public class BaseEnumSerializer<T extends Enum<T> & BaseEnum> extends JsonSerializer<T> {

    @Override
    public void serialize(T value, JsonGenerator gen, SerializerProvider serializers) 
            throws IOException {
        // ç›´æ¥è¿”å› descriptionï¼Œå¦‚ "article"
        gen.writeString(value.getDescription());
        
        // å¦‚æœéœ€è¦è¿”å›å®Œæ•´å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š
        // gen.writeStartObject();
        // gen.writeNumberField("code", value.getCode());
        // gen.writeStringField("desc", value.getDescription());
        // gen.writeEndObject();
    }
}
```


**æ–‡ä»¶ 5: EnumModule.java**

è·¯å¾„ï¼š`siae-core/src/main/java/com/hngy/siae/core/jackson/EnumModule.java`

```java
package com.hngy.siae.core.jackson;

import com.fasterxml.jackson.databind.module.SimpleModule;
import com.hngy.siae.core.enums.BaseEnum;
import org.reflections.Reflections;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.util.Set;

/**
 * æšä¸¾ Jackson æ¨¡å—
 * è‡ªåŠ¨æ‰«æå¹¶æ³¨å†Œæ‰€æœ‰ BaseEnum å®ç°ç±»çš„åºåˆ—åŒ–å™¨å’Œååºåˆ—åŒ–å™¨
 * 
 * @author KEYKB
 */
@SuppressWarnings("unchecked")
public class EnumModule extends SimpleModule {
    
    private static final Logger log = LoggerFactory.getLogger(EnumModule.class);

    /**
     * æ‰«ææŒ‡å®šåŒ…ä¸‹çš„æ‰€æœ‰æšä¸¾
     * 
     * @param basePackages è¦æ‰«æçš„åŸºç¡€åŒ…è·¯å¾„
     */
    public EnumModule(String... basePackages) {
        super("BaseEnumModule");
        
        for (String basePackage : basePackages) {
            scanAndRegister(basePackage);
        }
    }

    private void scanAndRegister(String basePackage) {
        try {
            Reflections reflections = new Reflections(basePackage);
            Set<Class<? extends BaseEnum>> enumClasses = reflections.getSubTypesOf(BaseEnum.class);

            for (Class<? extends BaseEnum> enumClass : enumClasses) {
                if (enumClass.isEnum()) {
                    this.addDeserializer((Class) enumClass, new BaseEnumDeserializer(enumClass));
                    this.addSerializer((Class) enumClass, new BaseEnumSerializer());
                    log.debug("æ³¨å†Œæšä¸¾åºåˆ—åŒ–å™¨: {}", enumClass.getName());
                }
            }
        } catch (Exception e) {
            log.warn("æ‰«ææšä¸¾ç±»å¤±è´¥: {}", basePackage, e);
        }
    }
}
```

#### 1.3 æ›´æ–° siae-core çš„ pom.xml

éœ€è¦æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š

```xml
<!-- ç”¨äºæ‰«ææšä¸¾ç±» -->
<dependency>
    <groupId>org.reflections</groupId>
    <artifactId>reflections</artifactId>
    <version>0.10.2</version>
</dependency>

<!-- Spring Webï¼ˆç”¨äº Converterï¼‰ -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <optional>true</optional>
</dependency>

<!-- MyBatis Plusï¼ˆç”¨äº @EnumValue æ³¨è§£æ”¯æŒï¼‰ -->
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-annotation</artifactId>
    <optional>true</optional>
</dependency>
```


---

### é˜¶æ®µäºŒï¼šåœ¨å„æœåŠ¡ä¸­é…ç½®æšä¸¾è½¬æ¢

#### 2.1 é…ç½®ç±»æ¨¡æ¿

æ¯ä¸ªæœåŠ¡éƒ½éœ€è¦åˆ›å»ºé…ç½®ç±»ï¼š`config/EnumConfig.java`

```java
package com.hngy.siae.{service}.config;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.hngy.siae.core.converter.StringToBaseEnumConverterFactory;
import com.hngy.siae.core.jackson.EnumModule;
import lombok.RequiredArgsConstructor;
import org.springframework.context.annotation.Configuration;
import org.springframework.format.FormatterRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

import jakarta.annotation.PostConstruct;

/**
 * æšä¸¾è½¬æ¢é…ç½®
 * 
 * @author KEYKB
 */
@Configuration
@RequiredArgsConstructor
public class EnumConfig implements WebMvcConfigurer {

    private final StringToBaseEnumConverterFactory converterFactory;
    private final ObjectMapper objectMapper;

    /**
     * æ³¨å†Œ URL å‚æ•°å’Œè¡¨å•çš„æšä¸¾è½¬æ¢å™¨
     */
    @Override
    public void addFormatters(FormatterRegistry registry) {
        registry.addConverterFactory(converterFactory);
    }

    /**
     * æ³¨å†Œ JSON çš„æšä¸¾åºåˆ—åŒ–å™¨å’Œååºåˆ—åŒ–å™¨
     */
    @PostConstruct
    public void configureObjectMapper() {
        // æ‰«æå½“å‰æœåŠ¡çš„æšä¸¾åŒ…
        objectMapper.registerModule(
            new EnumModule("com.hngy.siae.{service}.enums")
        );
        
        // å¦‚æœéœ€è¦æ‰«æå¤šä¸ªåŒ…ï¼Œå¯ä»¥ä¼ å…¥å¤šä¸ªå‚æ•°
        // objectMapper.registerModule(
        //     new EnumModule(
        //         "com.hngy.siae.{service}.enums",
        //         "com.hngy.siae.core.enums"
        //     )
        // );
    }
}
```

**è¯´æ˜**ï¼š
- å°† `{service}` æ›¿æ¢ä¸ºå…·ä½“çš„æœåŠ¡åï¼ˆå¦‚ contentã€userã€media ç­‰ï¼‰
- `addFormatters` æ–¹æ³•å¤„ç† URL å‚æ•°å’Œè¡¨å•æ•°æ®
- `configureObjectMapper` æ–¹æ³•å¤„ç† JSON è¯·æ±‚å’Œå“åº”


---

### é˜¶æ®µä¸‰ï¼šè¿ç§» Content æœåŠ¡

#### 3.1 åˆ é™¤é‡å¤ä»£ç 

éœ€è¦åˆ é™¤ä»¥ä¸‹æ–‡ä»¶ï¼ˆå·²ç§»åˆ° siae-coreï¼‰ï¼š

```
siae-content/src/main/java/com/hngy/siae/content/common/
â”œâ”€â”€ enums/
â”‚   â””â”€â”€ BaseEnum.java                    # ã€åˆ é™¤ã€‘
â””â”€â”€ utils/
    â”œâ”€â”€ StringToBaseEnumConverterFactory.java  # ã€åˆ é™¤ã€‘
    â”œâ”€â”€ BaseEnumDeserializer.java        # ã€åˆ é™¤ã€‘
    â”œâ”€â”€ BaseEnumSerializer.java          # ã€åˆ é™¤ã€‘
    â””â”€â”€ EnumModule.java                  # ã€åˆ é™¤ã€‘
```

#### 3.2 ä¿®æ”¹æšä¸¾ç±»

**ä¿®æ”¹æ‰€æœ‰æšä¸¾ç±»çš„ import è¯­å¥**

ä¿®æ”¹å‰ï¼š
```java
package com.hngy.siae.content.common.enums;

import com.baomidou.mybatisplus.annotation.EnumValue;
import lombok.AllArgsConstructor;
import lombok.Getter;

public enum ContentTypeEnum implements BaseEnum {  // âŒ æœ¬åœ°çš„ BaseEnum
    ARTICLE(0, "article"),
    NOTE(1, "note");

    @EnumValue
    private final int code;
    private final String description;
}
```

ä¿®æ”¹åï¼š
```java
package com.hngy.siae.content.common.enums;

import com.baomidou.mybatisplus.annotation.EnumValue;
import com.hngy.siae.core.enums.BaseEnum;  // âœ… ä½¿ç”¨ core çš„ BaseEnum
import lombok.AllArgsConstructor;
import lombok.Getter;

public enum ContentTypeEnum implements BaseEnum {
    ARTICLE(0, "article"),
    NOTE(1, "note");

    @EnumValue
    private final int code;
    private final String description;
}
```

**éœ€è¦ä¿®æ”¹çš„æšä¸¾ç±»**ï¼š
- `ContentTypeEnum.java`
- `ActionTypeEnum.java`
- `TypeEnum.java`
- `status/` ç›®å½•ä¸‹çš„æ‰€æœ‰æšä¸¾ç±»

#### 3.3 ä¿®æ”¹é…ç½®ç±»

**åˆ é™¤**ï¼š`WebConfig.java`

**åˆ›å»º**ï¼š`EnumConfig.java`

```java
package com.hngy.siae.content.config;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.hngy.siae.core.converter.StringToBaseEnumConverterFactory;
import com.hngy.siae.core.jackson.EnumModule;
import lombok.RequiredArgsConstructor;
import org.springframework.context.annotation.Configuration;
import org.springframework.format.FormatterRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

import jakarta.annotation.PostConstruct;

@Configuration
@RequiredArgsConstructor
public class EnumConfig implements WebMvcConfigurer {

    private final StringToBaseEnumConverterFactory converterFactory;
    private final ObjectMapper objectMapper;

    @Override
    public void addFormatters(FormatterRegistry registry) {
        registry.addConverterFactory(converterFactory);
    }

    @PostConstruct
    public void configureObjectMapper() {
        objectMapper.registerModule(
            new EnumModule("com.hngy.siae.content.common.enums")
        );
    }
}
```


---

### é˜¶æ®µå››ï¼šå‡çº§ User æœåŠ¡

#### 4.1 ä¿®æ”¹æšä¸¾ç±»

**éœ€è¦ä¿®æ”¹çš„æšä¸¾**ï¼š
1. `LifecycleStatusEnum.java`
2. `MemberTypeEnum.java`
3. `ClassUserStatusEnum.java`

**ç¤ºä¾‹ï¼šLifecycleStatusEnum.java**

ä¿®æ”¹å‰ï¼š
```java
package com.hngy.siae.user.enums;

import lombok.AllArgsConstructor;
import lombok.Getter;

@Getter
@AllArgsConstructor
public enum LifecycleStatusEnum {
    CANDIDATE(0, "å€™é€‰æˆå‘˜"),
    OFFICIAL(1, "æ­£å¼æˆå‘˜");

    private final Integer code;
    private final String description;

    // âŒ æ‰‹åŠ¨è½¬æ¢æ–¹æ³•
    public static LifecycleStatusEnum fromCode(Integer code) {
        if (code == null) {
            return null;
        }
        for (LifecycleStatusEnum status : values()) {
            if (status.getCode().equals(code)) {
                return status;
            }
        }
        return null;
    }

    public static boolean isCandidate(Integer code) {
        return CANDIDATE.getCode().equals(code);
    }

    public static boolean isOfficial(Integer code) {
        return OFFICIAL.getCode().equals(code);
    }
}
```

ä¿®æ”¹åï¼š
```java
package com.hngy.siae.user.enums;

import com.baomidou.mybatisplus.annotation.EnumValue;
import com.hngy.siae.core.enums.BaseEnum;  // âœ… å¯¼å…¥ core çš„ BaseEnum
import lombok.AllArgsConstructor;
import lombok.Getter;

@Getter
@AllArgsConstructor
public enum LifecycleStatusEnum implements BaseEnum {  // âœ… å®ç° BaseEnum
    CANDIDATE(0, "å€™é€‰æˆå‘˜"),
    OFFICIAL(1, "æ­£å¼æˆå‘˜");

    @EnumValue  // âœ… MyBatis Plus æ³¨è§£ï¼Œç”¨äºæ•°æ®åº“æ˜ å°„
    private final int code;  // âœ… æ”¹ä¸º intï¼ˆä¸ BaseEnum æ¥å£ä¸€è‡´ï¼‰
    private final String description;

    // âœ… åˆ é™¤ fromCode æ–¹æ³•ï¼Œä½¿ç”¨ BaseEnum çš„é»˜è®¤å®ç°
    
    // âœ… ä¿ç•™ä¸šåŠ¡åˆ¤æ–­æ–¹æ³•ï¼ˆå¯é€‰ï¼‰
    public static boolean isCandidate(int code) {
        return CANDIDATE.getCode() == code;
    }

    public static boolean isOfficial(int code) {
        return OFFICIAL.getCode() == code;
    }
}
```

**å…³é”®ä¿®æ”¹ç‚¹**ï¼š
1. å®ç° `BaseEnum` æ¥å£
2. æ·»åŠ  `@EnumValue` æ³¨è§£ï¼ˆç”¨äº MyBatis Plusï¼‰
3. `code` å­—æ®µæ”¹ä¸º `int` ç±»å‹
4. åˆ é™¤ `fromCode` æ–¹æ³•
5. ä¸šåŠ¡åˆ¤æ–­æ–¹æ³•å¯ä»¥ä¿ç•™ï¼ˆå¯é€‰ï¼‰


#### 4.2 ä¿®æ”¹å®ä½“ç±»

**ç¤ºä¾‹ï¼šMembership.java**

ä¿®æ”¹å‰ï¼š
```java
@Data
@TableName("membership")
public class Membership implements Serializable {
    @TableId(value = "id", type = IdType.AUTO)
    private Long id;
    
    private Long userId;
    
    private Integer lifecycleStatus;  // âŒ ä½¿ç”¨ Integer
    
    private LocalDate joinDate;
    // ...
}
```

ä¿®æ”¹åï¼š
```java
@Data
@TableName("membership")
public class Membership implements Serializable {
    @TableId(value = "id", type = IdType.AUTO)
    private Long id;
    
    private Long userId;
    
    private LifecycleStatusEnum lifecycleStatus;  // âœ… ä½¿ç”¨æšä¸¾ç±»å‹
    
    private LocalDate joinDate;
    // ...
}
```

**éœ€è¦ä¿®æ”¹çš„å®ä½“ç±»**ï¼š
- `Membership.java` - lifecycleStatus å­—æ®µ
- `MajorClassEnrollment.java` - memberType å’Œ status å­—æ®µ

#### 4.3 ä¿®æ”¹ DTO

**ç¤ºä¾‹ï¼šMembershipQueryDTO.java**

ä¿®æ”¹å‰ï¼š
```java
@Data
public class MembershipQueryDTO {
    private Long userId;
    private Integer lifecycleStatus;  // âŒ ä½¿ç”¨ Integer
    private Long departmentId;
    // ...
}
```

ä¿®æ”¹åï¼š
```java
@Data
public class MembershipQueryDTO {
    private Long userId;
    private LifecycleStatusEnum lifecycleStatus;  // âœ… ä½¿ç”¨æšä¸¾ç±»å‹
    private Long departmentId;
    // ...
}
```

**éœ€è¦ä¿®æ”¹çš„ DTO**ï¼š
- `MembershipQueryDTO.java`
- `MembershipCreateDTO.java`ï¼ˆå¦‚æœæœ‰ï¼‰
- å…¶ä»–åŒ…å«æšä¸¾å­—æ®µçš„ DTO


#### 4.4 ä¿®æ”¹ VO

**ç¤ºä¾‹ï¼šMembershipVO.java**

ä¿®æ”¹å‰ï¼š
```java
@Data
public class MembershipVO {
    private Long id;
    private Long userId;
    private Integer lifecycleStatus;  // âŒ ä½¿ç”¨ Integer
    private String lifecycleStatusName;  // âŒ æ‰‹åŠ¨æ‹¼æ¥çš„çŠ¶æ€åç§°
    private LocalDate joinDate;

    // âŒ æ‰‹åŠ¨è®¾ç½®çŠ¶æ€åç§°
    public void setLifecycleStatus(Integer lifecycleStatus) {
        this.lifecycleStatus = lifecycleStatus;
        if (lifecycleStatus != null) {
            this.lifecycleStatusName = lifecycleStatus == 0 ? "å€™é€‰æˆå‘˜" : "æ­£å¼æˆå‘˜";
        }
    }
}
```

ä¿®æ”¹åï¼š
```java
@Data
public class MembershipVO {
    private Long id;
    private Long userId;
    private LifecycleStatusEnum lifecycleStatus;  // âœ… ä½¿ç”¨æšä¸¾ç±»å‹
    // âœ… åˆ é™¤ lifecycleStatusName å­—æ®µï¼ˆæšä¸¾ä¼šè‡ªåŠ¨åºåˆ—åŒ–ä¸º "å€™é€‰æˆå‘˜"ï¼‰
    private LocalDate joinDate;

    // âœ… åˆ é™¤æ‰‹åŠ¨è®¾ç½®æ–¹æ³•ï¼ˆä¸å†éœ€è¦ï¼‰
}
```

**è¯´æ˜**ï¼š
- æšä¸¾ä¼šè‡ªåŠ¨åºåˆ—åŒ–ä¸º description å€¼ï¼ˆå¦‚ "å€™é€‰æˆå‘˜"ï¼‰
- ä¸å†éœ€è¦å•ç‹¬çš„ `xxxName` å­—æ®µ
- ä¸å†éœ€è¦æ‰‹åŠ¨è®¾ç½®æ–¹æ³•

**éœ€è¦ä¿®æ”¹çš„ VO**ï¼š
- `MembershipVO.java`
- `MembershipDetailVO.java`
- å…¶ä»–åŒ…å«æšä¸¾å­—æ®µçš„ VO

#### 4.5 åˆ›å»ºé…ç½®ç±»

**åˆ›å»º**ï¼š`EnumConfig.java`

```java
package com.hngy.siae.user.config;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.hngy.siae.core.converter.StringToBaseEnumConverterFactory;
import com.hngy.siae.core.jackson.EnumModule;
import lombok.RequiredArgsConstructor;
import org.springframework.context.annotation.Configuration;
import org.springframework.format.FormatterRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

import jakarta.annotation.PostConstruct;

@Configuration
@RequiredArgsConstructor
public class EnumConfig implements WebMvcConfigurer {

    private final StringToBaseEnumConverterFactory converterFactory;
    private final ObjectMapper objectMapper;

    @Override
    public void addFormatters(FormatterRegistry registry) {
        registry.addConverterFactory(converterFactory);
    }

    @PostConstruct
    public void configureObjectMapper() {
        objectMapper.registerModule(
            new EnumModule("com.hngy.siae.user.enums")
        );
    }
}
```


---

### é˜¶æ®µäº”ï¼šå…¶ä»–æœåŠ¡ï¼ˆå¯é€‰ï¼‰

#### 5.1 æ£€æŸ¥æ¸…å•

å¯¹æ¯ä¸ªæœåŠ¡æ‰§è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š

**Media æœåŠ¡**ï¼š
- [ ] æ£€æŸ¥æ˜¯å¦æœ‰æšä¸¾ç±»
- [ ] å¦‚æœæœ‰ï¼ŒæŒ‰ç…§ User æœåŠ¡çš„æ–¹å¼å‡çº§
- [ ] åˆ›å»º `EnumConfig.java`

**Notification æœåŠ¡**ï¼š
- [ ] æ£€æŸ¥æ˜¯å¦æœ‰æšä¸¾ç±»
- [ ] å¦‚æœæœ‰ï¼ŒæŒ‰ç…§ User æœåŠ¡çš„æ–¹å¼å‡çº§
- [ ] åˆ›å»º `EnumConfig.java`

**Auth æœåŠ¡**ï¼š
- [ ] æ£€æŸ¥æ˜¯å¦æœ‰æšä¸¾ç±»
- [ ] å¦‚æœæœ‰ï¼ŒæŒ‰ç…§ User æœåŠ¡çš„æ–¹å¼å‡çº§
- [ ] åˆ›å»º `EnumConfig.java`

#### 5.2 å‡çº§æ­¥éª¤ï¼ˆå¦‚æœæœ‰æšä¸¾ï¼‰

1. ä¿®æ”¹æšä¸¾ç±»å®ç° `BaseEnum` æ¥å£
2. æ·»åŠ  `@EnumValue` æ³¨è§£
3. ä¿®æ”¹å®ä½“ç±»ã€DTOã€VO ä½¿ç”¨æšä¸¾ç±»å‹
4. åˆ›å»º `EnumConfig.java` é…ç½®ç±»
5. æµ‹è¯•éªŒè¯

---

### é˜¶æ®µå…­ï¼šæµ‹è¯•éªŒè¯

#### 6.1 æµ‹è¯•åœºæ™¯

**åœºæ™¯ 1ï¼šURL å‚æ•°ä¼ é€’**

```bash
# æµ‹è¯•ä¼ æ•°å­—
GET /api/v1/content?type=0
# æœŸæœ›ï¼šæ­£å¸¸è¿”å›ï¼Œtype è¢«è§£æä¸º ARTICLE

# æµ‹è¯•ä¼ æè¿°
GET /api/v1/content?type=article
# æœŸæœ›ï¼šæ­£å¸¸è¿”å›ï¼Œtype è¢«è§£æä¸º ARTICLE

# æµ‹è¯•æ— æ•ˆå€¼
GET /api/v1/content?type=invalid
# æœŸæœ›ï¼šè¿”å› 400 é”™è¯¯ï¼Œæç¤ºæ— æ•ˆçš„æšä¸¾å€¼
```

**åœºæ™¯ 2ï¼šJSON è¯·æ±‚ä½“**

```bash
# æµ‹è¯•ä¼ æ•°å­—
POST /api/v1/content
Content-Type: application/json

{
  "title": "æµ‹è¯•æ–‡ç« ",
  "type": 0
}
# æœŸæœ›ï¼šæ­£å¸¸åˆ›å»ºï¼Œtype è¢«è§£æä¸º ARTICLE

# æµ‹è¯•ä¼ æè¿°
POST /api/v1/content
Content-Type: application/json

{
  "title": "æµ‹è¯•æ–‡ç« ",
  "type": "article"
}
# æœŸæœ›ï¼šæ­£å¸¸åˆ›å»ºï¼Œtype è¢«è§£æä¸º ARTICLE
```

**åœºæ™¯ 3ï¼šJSON å“åº”**

```bash
GET /api/v1/content/1

# æœŸæœ›å“åº”ï¼š
{
  "code": 200,
  "data": {
    "id": 1,
    "title": "æµ‹è¯•æ–‡ç« ",
    "type": "article"  // âœ… è¿”å›æè¿°ï¼Œè€Œä¸æ˜¯ 0
  }
}
```

**åœºæ™¯ 4ï¼šæ•°æ®åº“æ˜ å°„**

```java
// ä¿å­˜æ—¶ï¼šæšä¸¾ -> æ•°å­—
Membership membership = new Membership();
membership.setLifecycleStatus(LifecycleStatusEnum.CANDIDATE);
membershipMapper.insert(membership);
// æœŸæœ›ï¼šæ•°æ®åº“ä¸­ lifecycle_status å­—æ®µå­˜å‚¨ä¸º 0

// æŸ¥è¯¢æ—¶ï¼šæ•°å­— -> æšä¸¾
Membership result = membershipMapper.selectById(1L);
LifecycleStatusEnum status = result.getLifecycleStatus();
// æœŸæœ›ï¼šstatus ä¸º LifecycleStatusEnum.CANDIDATE
```


#### 6.2 æµ‹è¯•æ¸…å•

**Content æœåŠ¡**ï¼š
- [ ] URL å‚æ•°ä¼ æ•°å­—æ­£å¸¸
- [ ] URL å‚æ•°ä¼ æè¿°æ­£å¸¸
- [ ] JSON è¯·æ±‚ä½“ä¼ æ•°å­—æ­£å¸¸
- [ ] JSON è¯·æ±‚ä½“ä¼ æè¿°æ­£å¸¸
- [ ] JSON å“åº”è¿”å›æè¿°
- [ ] æ•°æ®åº“ä¿å­˜ä¸ºæ•°å­—
- [ ] æ•°æ®åº“æŸ¥è¯¢è½¬æ¢ä¸ºæšä¸¾
- [ ] æ— æ•ˆæšä¸¾å€¼æŠ¥é”™å‹å¥½

**User æœåŠ¡**ï¼š
- [ ] URL å‚æ•°ä¼ æ•°å­—æ­£å¸¸
- [ ] URL å‚æ•°ä¼ æè¿°æ­£å¸¸
- [ ] JSON è¯·æ±‚ä½“ä¼ æ•°å­—æ­£å¸¸
- [ ] JSON è¯·æ±‚ä½“ä¼ æè¿°æ­£å¸¸
- [ ] JSON å“åº”è¿”å›æè¿°
- [ ] æ•°æ®åº“ä¿å­˜ä¸ºæ•°å­—
- [ ] æ•°æ®åº“æŸ¥è¯¢è½¬æ¢ä¸ºæšä¸¾
- [ ] æ— æ•ˆæšä¸¾å€¼æŠ¥é”™å‹å¥½

**å…¶ä»–æœåŠ¡**ï¼š
- [ ] æŒ‰éœ€æµ‹è¯•

#### 6.3 å›å½’æµ‹è¯•

- [ ] æ‰€æœ‰ç°æœ‰æ¥å£åŠŸèƒ½æ­£å¸¸
- [ ] å‰ç«¯è°ƒç”¨æ— å¼‚å¸¸
- [ ] æ•°æ®åº“æ•°æ®ä¸€è‡´æ€§
- [ ] API æ–‡æ¡£ç”Ÿæˆæ­£å¸¸ï¼ˆSwaggerï¼‰
- [ ] æ—¥å¿—è¾“å‡ºæ­£å¸¸

---

### é˜¶æ®µä¸ƒï¼šæ–‡æ¡£æ›´æ–°

#### 7.1 æ›´æ–° siae-core README

åœ¨ `siae-core/README.md` ä¸­æ·»åŠ æšä¸¾ä½¿ç”¨è¯´æ˜ï¼š

```markdown
## æšä¸¾è‡ªåŠ¨è½¬æ¢

### åŠŸèƒ½è¯´æ˜

siae-core æä¾›äº†ç»Ÿä¸€çš„æšä¸¾è‡ªåŠ¨è½¬æ¢åŠŸèƒ½ï¼Œæ”¯æŒï¼š
- URL å‚æ•°å’Œè¡¨å•æ•°æ®çš„æšä¸¾è½¬æ¢
- JSON è¯·æ±‚ä½“çš„æšä¸¾ååºåˆ—åŒ–
- JSON å“åº”çš„æšä¸¾åºåˆ—åŒ–
- MyBatis Plus çš„æ•°æ®åº“æ˜ å°„

### ä½¿ç”¨æ–¹æ³•

#### 1. å®šä¹‰æšä¸¾ç±»

```java
import com.baomidou.mybatisplus.annotation.EnumValue;
import com.hngy.siae.core.enums.BaseEnum;
import lombok.AllArgsConstructor;
import lombok.Getter;

@Getter
@AllArgsConstructor
public enum ContentTypeEnum implements BaseEnum {
    ARTICLE(0, "article"),
    NOTE(1, "note");

    @EnumValue  // MyBatis Plus æ³¨è§£
    private final int code;
    private final String description;
}
```

#### 2. åœ¨æœåŠ¡ä¸­é…ç½®

```java
@Configuration
@RequiredArgsConstructor
public class EnumConfig implements WebMvcConfigurer {
    private final StringToBaseEnumConverterFactory converterFactory;
    private final ObjectMapper objectMapper;

    @Override
    public void addFormatters(FormatterRegistry registry) {
        registry.addConverterFactory(converterFactory);
    }

    @PostConstruct
    public void configureObjectMapper() {
        objectMapper.registerModule(
            new EnumModule("com.hngy.siae.{service}.enums")
        );
    }
}
```

#### 3. åœ¨å®ä½“ç±»å’Œ DTO ä¸­ä½¿ç”¨

```java
@Data
public class Content {
    private ContentTypeEnum type;  // ç›´æ¥ä½¿ç”¨æšä¸¾ç±»å‹
}
```

### æ”¯æŒçš„è¾“å…¥æ ¼å¼

- **æ•°å­—**ï¼š`0`, `1`, `2`
- **æè¿°**ï¼š`"article"`, `"note"`

### è¾“å‡ºæ ¼å¼

é»˜è®¤è¾“å‡ºä¸ºæè¿°å­—ç¬¦ä¸²ï¼š`"article"`

å¦‚éœ€è¾“å‡ºå®Œæ•´å¯¹è±¡ï¼Œå¯ä¿®æ”¹ `BaseEnumSerializer`ã€‚
```


#### 7.2 æ›´æ–°å„æœåŠ¡çš„ README

åœ¨æ¥å£æ–‡æ¡£ä¸­è¯´æ˜æšä¸¾å€¼çš„ä¼ é€’æ–¹å¼ã€‚

**ç¤ºä¾‹ï¼ˆContent æœåŠ¡ï¼‰**ï¼š

```markdown
## æšä¸¾ç±»å‹è¯´æ˜

### å†…å®¹ç±»å‹ (type)

æ”¯æŒä»¥ä¸‹ä¸¤ç§ä¼ å‚æ–¹å¼ï¼š

**æ–¹å¼ä¸€ï¼šä¼ æ•°å­—**
```json
{
  "type": 0
}
```

**æ–¹å¼äºŒï¼šä¼ æè¿°ï¼ˆæ¨èï¼‰**
```json
{
  "type": "article"
}
```

**æšä¸¾å€¼å¯¹ç…§è¡¨**ï¼š
- `0` / `"article"` - æ–‡ç« 
- `1` / `"note"` - ç¬”è®°
- `2` / `"question"` - æé—®
- `3` / `"file"` - æ–‡ä»¶
- `4` / `"video"` - è§†é¢‘

**å“åº”æ ¼å¼**ï¼š
```json
{
  "type": "article"  // è¿”å›æè¿°å­—ç¬¦ä¸²
}
```
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. å…¼å®¹æ€§é—®é¢˜

**æ•°æ®åº“å…¼å®¹**ï¼š
- âœ… ä½¿ç”¨ `@EnumValue` æ³¨è§£ç¡®ä¿æ•°æ®åº“å­˜å‚¨ä¸ºæ•°å­—
- âœ… ç°æœ‰æ•°æ®æ— éœ€è¿ç§»ï¼Œè‡ªåŠ¨å…¼å®¹

**API å…¼å®¹**ï¼š
- âœ… æ”¯æŒæ•°å­—å’Œå­—ç¬¦ä¸²ä¸¤ç§è¾“å…¥æ–¹å¼
- âœ… ç°æœ‰å‰ç«¯ä»£ç æ— éœ€ä¿®æ”¹ï¼ˆå¦‚æœä¼ æ•°å­—ï¼‰
- âš ï¸ å“åº”æ ¼å¼å˜åŒ–ï¼šä»æ•°å­—å˜ä¸ºå­—ç¬¦ä¸²ï¼ˆéœ€è¦å‰ç«¯é€‚é…ï¼‰

**å‰ç«¯å…¼å®¹**ï¼š
- å»ºè®®å‰ç«¯ç»Ÿä¸€ä½¿ç”¨å­—ç¬¦ä¸²ï¼ˆæ›´å¯è¯»ï¼‰
- å¦‚æœå‰ç«¯ä¾èµ–æ•°å­—ï¼Œéœ€è¦ä¿®æ”¹ `BaseEnumSerializer`

### 2. æ€§èƒ½è€ƒè™‘

- âœ… æšä¸¾æ‰«æåœ¨å¯åŠ¨æ—¶è¿›è¡Œï¼Œä¸å½±å“è¿è¡Œæ—¶æ€§èƒ½
- âœ… è½¬æ¢é€»è¾‘ç®€å•ï¼Œæ€§èƒ½æŸè€—å¯å¿½ç•¥
- âœ… ç›¸æ¯”æ‰‹åŠ¨è½¬æ¢ï¼Œæ€§èƒ½åŸºæœ¬ä¸€è‡´

### 3. é”™è¯¯å¤„ç†

**æ— æ•ˆæšä¸¾å€¼**ï¼š
- ä¼šæŠ›å‡º `IllegalArgumentException`
- å»ºè®®åœ¨å…¨å±€å¼‚å¸¸å¤„ç†å™¨ä¸­ç»Ÿä¸€å¤„ç†

**ç¤ºä¾‹**ï¼š
```java
@RestControllerAdvice
public class GlobalExceptionHandler {
    
    @ExceptionHandler(IllegalArgumentException.class)
    public Result<?> handleIllegalArgument(IllegalArgumentException e) {
        if (e.getMessage().contains("æ— æ³•å°†") || e.getMessage().contains("æ— æ³•è§£æ")) {
            return Result.error(400, "æ— æ•ˆçš„æšä¸¾å€¼: " + e.getMessage());
        }
        return Result.error(400, e.getMessage());
    }
}
```

### 4. ç‰ˆæœ¬æ§åˆ¶

**å»ºè®®çš„è¿ç§»ç­–ç•¥**ï¼š
1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š`feature/enum-refactor`
2. å…ˆè¿ç§» Content æœåŠ¡ï¼ˆå·²å®ç°ï¼Œåªéœ€è°ƒæ•´ï¼‰
3. éªŒè¯æ— è¯¯åï¼Œå†è¿ç§» User æœåŠ¡
4. é€æ­¥è¿ç§»å…¶ä»–æœåŠ¡
5. åˆå¹¶åˆ°ä¸»åˆ†æ”¯

**å›æ»šæ–¹æ¡ˆ**ï¼š
- ä¿ç•™åŸæœ‰ä»£ç çš„å¤‡ä»½
- å¦‚æœå‡ºç°é—®é¢˜ï¼Œå¯ä»¥å¿«é€Ÿå›æ»š
- æ•°æ®åº“æ•°æ®æ— éœ€å›æ»šï¼ˆå…¼å®¹ï¼‰


### 5. å¸¸è§é—®é¢˜

**Q1ï¼šä¸ºä»€ä¹ˆå“åº”è¿”å›å­—ç¬¦ä¸²è€Œä¸æ˜¯æ•°å­—ï¼Ÿ**

Aï¼šå­—ç¬¦ä¸²æ›´å…·å¯è¯»æ€§ï¼Œå‰ç«¯ä¸éœ€è¦ç»´æŠ¤æšä¸¾æ˜ å°„è¡¨ã€‚å¦‚æœéœ€è¦è¿”å›æ•°å­—ï¼Œå¯ä»¥ä¿®æ”¹ `BaseEnumSerializer`ï¼š

```java
@Override
public void serialize(T value, JsonGenerator gen, SerializerProvider serializers) 
        throws IOException {
    gen.writeNumber(value.getCode());  // è¿”å›æ•°å­—
}
```

**Q2ï¼šå¦‚ä½•è¿”å›å®Œæ•´çš„æšä¸¾å¯¹è±¡ï¼ˆåŒ…å« code å’Œ descriptionï¼‰ï¼Ÿ**

Aï¼šä¿®æ”¹ `BaseEnumSerializer`ï¼š

```java
@Override
public void serialize(T value, JsonGenerator gen, SerializerProvider serializers) 
        throws IOException {
    gen.writeStartObject();
    gen.writeNumberField("code", value.getCode());
    gen.writeStringField("desc", value.getDescription());
    gen.writeEndObject();
}
```

**Q3ï¼šæšä¸¾æ‰«æå¤±è´¥æ€ä¹ˆåŠï¼Ÿ**

Aï¼šæ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç¡®ä¿ `reflections` ä¾èµ–å·²æ·»åŠ 
2. ç¡®ä¿åŒ…è·¯å¾„æ­£ç¡®
3. æŸ¥çœ‹å¯åŠ¨æ—¥å¿—ä¸­çš„è­¦å‘Šä¿¡æ¯
4. å¯ä»¥æ‰‹åŠ¨æ³¨å†Œæšä¸¾ï¼ˆä¸ä½¿ç”¨æ‰«æï¼‰

**Q4ï¼šMyBatis Plus æŸ¥è¯¢æ—¶æšä¸¾ä¸º nullï¼Ÿ**

Aï¼šæ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç¡®ä¿æšä¸¾ç±»æ·»åŠ äº† `@EnumValue` æ³¨è§£
2. ç¡®ä¿ `mybatis-plus-annotation` ä¾èµ–å·²æ·»åŠ 
3. ç¡®ä¿æ•°æ®åº“ä¸­çš„å€¼ä¸æšä¸¾çš„ code åŒ¹é…

**Q5ï¼šå‰ç«¯å¦‚ä½•å¤„ç†æšä¸¾ï¼Ÿ**

Aï¼šæ¨èä½¿ç”¨ TypeScript å®šä¹‰æšä¸¾ç±»å‹ï¼š

```typescript
// æ¨èï¼šä½¿ç”¨å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹
type ContentType = 'article' | 'note' | 'question' | 'file' | 'video';

// æˆ–è€…ä½¿ç”¨æšä¸¾
enum ContentType {
  ARTICLE = 'article',
  NOTE = 'note',
  QUESTION = 'question',
  FILE = 'file',
  VIDEO = 'video'
}
```

---

## ğŸ“Š è¿ç§»ä¼˜å…ˆçº§

### é«˜ä¼˜å…ˆçº§

1. **siae-core**ï¼šåˆ›å»ºåŸºç¡€è®¾æ–½ï¼ˆå¿…é¡»å…ˆå®Œæˆï¼‰
2. **Content æœåŠ¡**ï¼šå·²å®ç°ï¼Œåªéœ€è¿ç§»ï¼ˆéªŒè¯æ–¹æ¡ˆï¼‰
3. **User æœåŠ¡**ï¼šéœ€è¦æ”¹é€ ï¼ˆæ ¸å¿ƒæœåŠ¡ï¼‰

### ä¸­ä¼˜å…ˆçº§

4. **Auth æœåŠ¡**ï¼šå¦‚æœæœ‰æšä¸¾ï¼Œéœ€è¦å‡çº§

### ä½ä¼˜å…ˆçº§

5. **Media æœåŠ¡**ï¼šå¦‚æœæœ‰æšä¸¾ï¼Œéœ€è¦å‡çº§
6. **Notification æœåŠ¡**ï¼šå¦‚æœæœ‰æšä¸¾ï¼Œéœ€è¦å‡çº§

---

## ğŸ¯ é¢„æœŸæ”¶ç›Š

### ä»£ç è´¨é‡

- âœ… **å‡å°‘é‡å¤ä»£ç  80%+**ï¼šæšä¸¾è½¬æ¢é€»è¾‘ç»Ÿä¸€åˆ° core
- âœ… **æé«˜ç±»å‹å®‰å…¨**ï¼šç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯
- âœ… **ç»Ÿä¸€è¡Œä¸º**ï¼šæ‰€æœ‰æœåŠ¡æšä¸¾å¤„ç†ä¸€è‡´

### å¼€å‘æ•ˆç‡

- âœ… **å‡å°‘æ‰‹åŠ¨è½¬æ¢**ï¼šæ— éœ€ç¼–å†™ fromCode æ–¹æ³•
- âœ… **å‡å°‘ VO å­—æ®µ**ï¼šæ— éœ€å•ç‹¬çš„ xxxName å­—æ®µ
- âœ… **å‡å°‘ç»´æŠ¤æˆæœ¬**ï¼šä¿®æ”¹ä¸€å¤„ï¼Œæ‰€æœ‰æœåŠ¡ç”Ÿæ•ˆ

### API è´¨é‡

- âœ… **æ›´å¥½çš„å¯è¯»æ€§**ï¼šè¿”å› "article" è€Œä¸æ˜¯ 0
- âœ… **æ›´çµæ´»çš„è¾“å…¥**ï¼šæ”¯æŒæ•°å­—å’Œå­—ç¬¦ä¸²
- âœ… **æ›´å‹å¥½çš„é”™è¯¯æç¤º**ï¼šç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†

### å‰ç«¯ä½“éªŒ

- âœ… **æ— éœ€ç»´æŠ¤æ˜ å°„è¡¨**ï¼šæšä¸¾å€¼è‡ªè§£é‡Š
- âœ… **æ›´å¥½çš„ç±»å‹æç¤º**ï¼šTypeScript ç±»å‹æ›´æ¸…æ™°
- âœ… **å‡å°‘å‡ºé”™æ¦‚ç‡**ï¼šä¸éœ€è¦è®°å¿†æ•°å­—å«ä¹‰

---

## ğŸ“ æ‰§è¡Œæ£€æŸ¥æ¸…å•

### é˜¶æ®µä¸€ï¼šsiae-core

- [ ] åˆ›å»º `BaseEnum.java`
- [ ] åˆ›å»º `StringToBaseEnumConverterFactory.java`
- [ ] åˆ›å»º `BaseEnumDeserializer.java`
- [ ] åˆ›å»º `BaseEnumSerializer.java`
- [ ] åˆ›å»º `EnumModule.java`
- [ ] æ›´æ–° `pom.xml` æ·»åŠ ä¾èµ–
- [ ] ç¼–è¯‘é€šè¿‡

### é˜¶æ®µäºŒï¼šContent æœåŠ¡

- [ ] åˆ é™¤é‡å¤çš„æšä¸¾å·¥å…·ç±»
- [ ] ä¿®æ”¹æ‰€æœ‰æšä¸¾ç±»çš„ import
- [ ] åˆ é™¤ `WebConfig.java`
- [ ] åˆ›å»º `EnumConfig.java`
- [ ] ç¼–è¯‘é€šè¿‡
- [ ] æµ‹è¯• URL å‚æ•°è½¬æ¢
- [ ] æµ‹è¯• JSON è½¬æ¢
- [ ] æµ‹è¯•æ•°æ®åº“æ˜ å°„
- [ ] å›å½’æµ‹è¯•é€šè¿‡

### é˜¶æ®µä¸‰ï¼šUser æœåŠ¡

- [ ] ä¿®æ”¹ `LifecycleStatusEnum.java`
- [ ] ä¿®æ”¹ `MemberTypeEnum.java`
- [ ] ä¿®æ”¹ `ClassUserStatusEnum.java`
- [ ] ä¿®æ”¹ `Membership.java` å®ä½“ç±»
- [ ] ä¿®æ”¹ `MajorClassEnrollment.java` å®ä½“ç±»
- [ ] ä¿®æ”¹æ‰€æœ‰ç›¸å…³ DTO
- [ ] ä¿®æ”¹æ‰€æœ‰ç›¸å…³ VO
- [ ] åˆ›å»º `EnumConfig.java`
- [ ] ç¼–è¯‘é€šè¿‡
- [ ] æµ‹è¯• URL å‚æ•°è½¬æ¢
- [ ] æµ‹è¯• JSON è½¬æ¢
- [ ] æµ‹è¯•æ•°æ®åº“æ˜ å°„
- [ ] å›å½’æµ‹è¯•é€šè¿‡

### é˜¶æ®µå››ï¼šå…¶ä»–æœåŠ¡

- [ ] æ£€æŸ¥ Media æœåŠ¡
- [ ] æ£€æŸ¥ Notification æœåŠ¡
- [ ] æ£€æŸ¥ Auth æœåŠ¡
- [ ] æŒ‰éœ€å‡çº§

### é˜¶æ®µäº”ï¼šæ–‡æ¡£

- [ ] æ›´æ–° siae-core README
- [ ] æ›´æ–° Content æœåŠ¡ README
- [ ] æ›´æ–° User æœåŠ¡ README
- [ ] æ›´æ–°å…¶ä»–æœåŠ¡ README

### é˜¶æ®µå…­ï¼šéªŒæ”¶

- [ ] æ‰€æœ‰æœåŠ¡ç¼–è¯‘é€šè¿‡
- [ ] æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] æ‰€æœ‰é›†æˆæµ‹è¯•é€šè¿‡
- [ ] API æ–‡æ¡£ç”Ÿæˆæ­£å¸¸
- [ ] å‰ç«¯è”è°ƒé€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡

---

## ğŸ“… æ—¶é—´ä¼°ç®—

- **é˜¶æ®µä¸€ï¼ˆsiae-coreï¼‰**ï¼š2-3 å°æ—¶
- **é˜¶æ®µäºŒï¼ˆContent æœåŠ¡ï¼‰**ï¼š1-2 å°æ—¶
- **é˜¶æ®µä¸‰ï¼ˆUser æœåŠ¡ï¼‰**ï¼š3-4 å°æ—¶
- **é˜¶æ®µå››ï¼ˆå…¶ä»–æœåŠ¡ï¼‰**ï¼š1-2 å°æ—¶/æœåŠ¡
- **é˜¶æ®µäº”ï¼ˆæ–‡æ¡£ï¼‰**ï¼š1-2 å°æ—¶
- **é˜¶æ®µå…­ï¼ˆæµ‹è¯•ï¼‰**ï¼š2-3 å°æ—¶

**æ€»è®¡**ï¼šçº¦ 10-16 å°æ—¶ï¼ˆ1-2 ä¸ªå·¥ä½œæ—¥ï¼‰

---

## ğŸ”— ç›¸å…³èµ„æº

- [MyBatis Plus æšä¸¾å¤„ç†æ–‡æ¡£](https://baomidou.com/pages/8390a4/)
- [Jackson è‡ªå®šä¹‰åºåˆ—åŒ–æ–‡æ¡£](https://github.com/FasterXML/jackson-docs)
- [Spring MVC Converter æ–‡æ¡£](https://docs.spring.io/spring-framework/reference/core/validation/convert.html)

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼š
- **ä½œè€…**ï¼šKEYKB
- **é‚®ç®±**ï¼š[your-email]
- **æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
- **æœ€åæ›´æ–°**ï¼š2025-11-13

---

**æ³¨æ„**ï¼šæœ¬æ–‡æ¡£ä¸ºè¿ç§»è®¡åˆ’ï¼Œæ‰§è¡Œå‰è¯·å…ˆå¤‡ä»½ä»£ç ï¼Œå»ºè®®åœ¨åŠŸèƒ½åˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘å’Œæµ‹è¯•ã€‚
