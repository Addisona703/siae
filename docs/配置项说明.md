# SIAE 系统配置项说明

本文档详细说明了 SIAE 系统中 core、security、web 三个核心模块的所有可配置项。

---

## 目录

- [认证配置 (siae.auth)](#认证配置-siaeauth)
- [安全配置 (siae.security)](#安全配置-siaesecurity)
- [Web配置 (siae.web)](#web配置-siaeweb)
- [Swagger配置 (springdoc)](#swagger配置-springdoc)
- [配置示例](#配置示例)

---

## 认证配置 (siae.auth)

> 配置类：`com.hngy.siae.core.config.AuthProperties`

通用认证配置，供网关和微服务共同使用。

### 基础配置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `siae.auth.enable-gateway-auth` | boolean | `true` | 是否启用网关认证模式（生产环境建议true） |
| `siae.auth.enable-direct-access` | boolean | `false` | 是否允许直接外部访问（生产环境建议false，开发环境可设为true） |
| `siae.auth.gateway-secret-key` | String | `siae-gateway-2025` | 网关密钥，用于验证请求确实来自网关 |
| `siae.auth.internal-secret-key` | String | `siae-internal-2025` | 内部服务调用密钥，用于服务间调用认证 |
| `siae.auth.gateway-secret-valid-seconds` | int | `300` | 网关密钥有效期（秒），防重放攻击 |

### 配置说明

- **网关认证模式**：启用后，微服务只接受来自网关的请求
- **直接访问**：开发环境可以启用，方便调试；生产环境必须关闭
- **密钥配置**：生产环境务必修改默认密钥，建议使用强随机字符串

---

## 安全配置 (siae.security)

> 配置类：`com.hngy.siae.security.properties.SecurityProperties`

安全相关配置，包括JWT、权限、认证服务等。

### 基础配置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `siae.security.enabled` | boolean | `true` | 是否启用安全功能 |
| `siae.security.auth-required-services` | List<String> | 见下方 | 需要权限验证的服务列表 |
| `siae.security.whitelist-paths` | List<String> | 见下方 | 白名单路径（不需要认证） |

**默认需要权限验证的服务：**
- `siae-media`
- `siae-auth`
- `siae-user`
- `siae-content`
- `siae-admin`

**默认白名单路径：**
- `/api/v1/auth/login`
- `/api/v1/auth/register`
- `/api/v1/auth/refresh-token`
- `/api/v1/auth/validate-token`
- `/actuator/**`
- `/swagger-ui/**`
- `/v3/api-docs/**`
- `/favicon.ico`
- `/error`

### JWT配置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `siae.security.jwt.enabled` | boolean | `true` | 是否启用JWT认证 |
| `siae.security.jwt.secret` | String | `siae-default-secret-key-change-in-production` | JWT密钥（生产环境必须修改） |
| `siae.security.jwt.access-token-expiration` | long | `7200` | 访问令牌过期时间（秒），默认2小时 |
| `siae.security.jwt.refresh-token-expiration` | long | `604800` | 刷新令牌过期时间（秒），默认7天 |
| `siae.security.jwt.token-prefix` | String | `Bearer ` | 令牌前缀 |
| `siae.security.jwt.header-name` | String | `Authorization` | 请求头名称 |
| `siae.security.jwt.allow-multiple-devices` | boolean | `true` | 是否允许多设备登录 |
| `siae.security.jwt.issuer` | String | `siae-system` | 令牌发行者 |

### 权限配置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `siae.security.permission.cache-enabled` | boolean | `true` | 是否启用权限缓存 |
| `siae.security.permission.cache-expiration` | long | `1800` | 权限缓存过期时间（秒），默认30分钟 |
| `siae.security.permission.cache-key-prefix` | String | `siae:permission:` | 权限缓存键前缀 |
| `siae.security.permission.redis-enabled` | boolean | `true` | 是否启用Redis权限服务 |
| `siae.security.permission.fallback-enabled` | boolean | `true` | Redis不可用时是否使用降级服务 |
| `siae.security.permission.throw-exception-on-failure` | boolean | `true` | 权限检查失败时是否抛出异常 |
| `siae.security.permission.log-enabled` | boolean | `false` | 是否启用权限日志 |

### 增强权限控制配置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `siae.security.enhanced-permission.enabled` | boolean | `false` | 是否启用增强权限控制 |
| `siae.security.enhanced-permission.super-admin-role` | String | `ROOT` | 超级管理员角色名称 |
| `siae.security.enhanced-permission.global-super-admin-enabled` | boolean | `true` | 是否启用全局超级管理员放行 |
| `siae.security.enhanced-permission.enhanced-spel-enabled` | boolean | `true` | 是否启用增强SpEL表达式 |
| `siae.security.enhanced-permission.detailed-logging` | boolean | `true` | 权限检查失败时是否记录详细日志 |
| `siae.security.enhanced-permission.cache-optimization-enabled` | boolean | `true` | 是否启用权限缓存优化 |

### 认证服务配置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `siae.security.auth-service.base-url` | String | `http://siae-auth:8000` | 认证服务基础URL |
| `siae.security.auth-service.connect-timeout` | int | `3000` | 连接超时时间（毫秒） |
| `siae.security.auth-service.read-timeout` | int | `5000` | 读取超时时间（毫秒） |
| `siae.security.auth-service.token-validation-enabled` | boolean | `true` | 是否启用token数据库验证 |
| `siae.security.auth-service.retry-count` | int | `1` | 验证失败时的重试次数 |
| `siae.security.auth-service.retry-interval` | int | `1000` | 重试间隔时间（毫秒） |

---

## Web配置 (siae.web)

> 配置类：`com.hngy.siae.web.properties.WebProperties`

Web相关配置，包括统一响应、Jackson序列化、异常处理、MyBatis Plus等。

### 统一响应处理配置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `siae.web.response.enabled` | boolean | `true` | 是否启用统一响应处理 |
| `siae.web.response.base-packages` | String[] | `["com.hngy.siae"]` | 需要包装响应的包路径 |
| `siae.web.response.exclude-patterns` | String[] | 见下方 | 排除的路径模式 |

**默认排除路径：**
- `/actuator/**`
- `/swagger-ui/**`
- `/v3/api-docs/**`

### Jackson序列化配置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `siae.web.jackson.enabled` | boolean | `true` | 是否启用Jackson配置 |
| `siae.web.jackson.date-format` | String | `yyyy-MM-dd HH:mm:ss` | 日期格式 |
| `siae.web.jackson.time-zone` | String | `GMT+8` | 时区 |
| `siae.web.jackson.serialize-nulls` | boolean | `false` | 是否序列化null值 |
| `siae.web.jackson.accept-enum-empty-string-as-null` | boolean | `true` | 是否将枚举类型的空字符串反序列化为null |

### 全局异常处理配置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `siae.web.exception.enabled` | boolean | `true` | 是否启用全局异常处理 |
| `siae.web.exception.print-stack-trace` | boolean | `true` | 是否打印异常堆栈 |
| `siae.web.exception.include-stack-trace` | boolean | `false` | 是否返回详细错误信息（生产环境建议关闭） |

### MyBatis Plus配置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `siae.web.mybatis-plus.enabled` | boolean | `true` | 是否启用MyBatis Plus配置 |
| `siae.web.mybatis-plus.pagination-enabled` | boolean | `true` | 是否启用分页插件 |
| `siae.web.mybatis-plus.max-limit` | long | `1000` | 分页插件最大限制数 |
| `siae.web.mybatis-plus.logic-delete-enabled` | boolean | `true` | 是否启用逻辑删除 |
| `siae.web.mybatis-plus.logic-delete-field` | String | `deleted` | 逻辑删除字段名 |
| `siae.web.mybatis-plus.logic-delete-value` | String | `1` | 逻辑删除值（已删除） |
| `siae.web.mybatis-plus.logic-not-delete-value` | String | `0` | 逻辑未删除值（未删除） |

---

## Swagger配置 (springdoc)

> 配置类：`com.hngy.siae.web.swagger.SwaggerProperties`

Swagger/OpenAPI文档配置。

### 基础配置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `springdoc.swagger-ui.enabled` | boolean | `true` | 是否启用Swagger UI |
| `springdoc.api-docs.enabled` | boolean | `true` | 是否启用API文档 |

### API信息配置

通过代码配置，可在 `SwaggerProperties` 中修改：

| 属性 | 默认值 | 说明 |
|------|--------|------|
| `apiInfo.title` | `SIAE微服务API` | API标题 |
| `apiInfo.description` | `软件协会官网系统API文档` | API描述 |
| `apiInfo.version` | `v1.0.0` | API版本 |
| `apiInfo.termsOfService` | `` | 服务条款URL |

### 联系人信息配置

| 属性 | 默认值 | 说明 |
|------|--------|------|
| `contact.name` | `SIAE开发团队` | 联系人姓名 |
| `contact.email` | `dev@siae.com` | 联系人邮箱 |
| `contact.url` | `https://github.com/siae` | 联系人URL |

### 许可证信息配置

| 属性 | 默认值 | 说明 |
|------|--------|------|
| `license.name` | `MIT License` | 许可证名称 |
| `license.url` | `https://opensource.org/licenses/MIT` | 许可证URL |

### 安全配置

| 属性 | 默认值 | 说明 |
|------|--------|------|
| `security.jwtEnabled` | `true` | 是否启用JWT认证 |
| `security.jwtSchemeName` | `JWT` | JWT认证方案名称 |
| `security.jwtDescription` | 见说明 | JWT认证描述 |
| `security.apiKeyEnabled` | `true` | 是否启用API Key认证 |
| `security.apiKeySchemeName` | `ApiKey` | API Key认证方案名称 |
| `security.apiKeyHeaderName` | `X-API-KEY` | API Key请求头名称 |

### UI配置

| 属性 | 默认值 | 说明 |
|------|--------|------|
| `ui.enabled` | `true` | 是否启用Swagger UI |
| `ui.path` | `/swagger-ui.html` | Swagger UI路径 |
| `ui.tagsSorter` | `alpha` | 标签排序方式（alpha/method） |
| `ui.operationsSorter` | `alpha` | 操作排序方式（alpha/method） |
| `ui.showRequestDuration` | `true` | 是否显示请求持续时间 |
| `ui.showCommonResponses` | `true` | 是否显示通用错误响应 |
| `ui.defaultModelsExpandDepth` | `1` | 默认展开深度 |
| `ui.defaultModelExpandDepth` | `1` | 默认模型渲染深度 |

---

## 配置示例

### 开发环境配置 (application-dev.yml)

```yaml
# 认证配置
siae:
  auth:
    enable-gateway-auth: false        # 开发环境关闭网关认证
    enable-direct-access: true        # 允许直接访问
    gateway-secret-key: dev-gateway-key
    internal-secret-key: dev-internal-key
    gateway-secret-valid-seconds: 600

  # 安全配置
  security:
    enabled: true
    
    # JWT配置
    jwt:
      enabled: true
      secret: dev-jwt-secret-key-2024
      access-token-expiration: 7200   # 2小时
      refresh-token-expiration: 604800 # 7天
      allow-multiple-devices: true
    
    # 权限配置
    permission:
      cache-enabled: true
      cache-expiration: 1800          # 30分钟
      redis-enabled: true
      fallback-enabled: true
      log-enabled: true               # 开发环境启用权限日志
    
    # 增强权限控制
    enhanced-permission:
      enabled: true
      super-admin-role: ROOT
      global-super-admin-enabled: true
      detailed-logging: true
    
    # 认证服务
    auth-service:
      base-url: http://localhost:8000
      connect-timeout: 5000
      read-timeout: 10000
      token-validation-enabled: true

  # Web配置
  web:
    # 统一响应
    response:
      enabled: true
      base-packages:
        - com.hngy.siae
      exclude-patterns:
        - /actuator/**
        - /swagger-ui/**
        - /v3/api-docs/**
    
    # Jackson配置
    jackson:
      enabled: true
      date-format: yyyy-MM-dd HH:mm:ss
      time-zone: GMT+8
      serialize-nulls: false
    
    # 异常处理
    exception:
      enabled: true
      print-stack-trace: true
      include-stack-trace: true       # 开发环境返回详细错误
    
    # MyBatis Plus
    mybatis-plus:
      enabled: true
      pagination-enabled: true
      max-limit: 1000
      logic-delete-enabled: true

# Swagger配置
springdoc:
  swagger-ui:
    enabled: true
    path: /swagger-ui.html
  api-docs:
    enabled: true
    path: /v3/api-docs
```

### 生产环境配置 (application-prod.yml)

```yaml
# 认证配置
siae:
  auth:
    enable-gateway-auth: true         # 生产环境启用网关认证
    enable-direct-access: false       # 禁止直接访问
    gateway-secret-key: ${GATEWAY_SECRET_KEY}  # 从环境变量读取
    internal-secret-key: ${INTERNAL_SECRET_KEY}
    gateway-secret-valid-seconds: 300

  # 安全配置
  security:
    enabled: true
    
    # JWT配置
    jwt:
      enabled: true
      secret: ${JWT_SECRET_KEY}       # 从环境变量读取
      access-token-expiration: 3600   # 1小时（生产环境缩短）
      refresh-token-expiration: 604800
      allow-multiple-devices: false   # 生产环境限制单设备登录
    
    # 权限配置
    permission:
      cache-enabled: true
      cache-expiration: 3600          # 1小时
      redis-enabled: true
      fallback-enabled: true
      log-enabled: false              # 生产环境关闭权限日志
    
    # 增强权限控制
    enhanced-permission:
      enabled: true
      super-admin-role: ROOT
      global-super-admin-enabled: true
      detailed-logging: false         # 生产环境关闭详细日志
    
    # 认证服务
    auth-service:
      base-url: http://siae-auth:8000
      connect-timeout: 3000
      read-timeout: 5000
      token-validation-enabled: true

  # Web配置
  web:
    # 统一响应
    response:
      enabled: true
    
    # Jackson配置
    jackson:
      enabled: true
      date-format: yyyy-MM-dd HH:mm:ss
      time-zone: GMT+8
      serialize-nulls: false
    
    # 异常处理
    exception:
      enabled: true
      print-stack-trace: false        # 生产环境不打印堆栈
      include-stack-trace: false      # 不返回详细错误信息
    
    # MyBatis Plus
    mybatis-plus:
      enabled: true
      pagination-enabled: true
      max-limit: 500                  # 生产环境限制更小
      logic-delete-enabled: true

# Swagger配置
springdoc:
  swagger-ui:
    enabled: false                    # 生产环境关闭Swagger UI
  api-docs:
    enabled: false                    # 生产环境关闭API文档
```

### 测试环境配置 (application-test.yml)

```yaml
# 认证配置
siae:
  auth:
    enable-gateway-auth: true
    enable-direct-access: false
    gateway-secret-key: test-gateway-key
    internal-secret-key: test-internal-key
    gateway-secret-valid-seconds: 300

  # 安全配置
  security:
    enabled: true
    
    jwt:
      enabled: true
      secret: test-jwt-secret-key-2024
      access-token-expiration: 7200
      refresh-token-expiration: 604800
      allow-multiple-devices: true
    
    permission:
      cache-enabled: true
      cache-expiration: 1800
      redis-enabled: true
      fallback-enabled: true
      log-enabled: true
    
    enhanced-permission:
      enabled: true
      detailed-logging: true

  # Web配置
  web:
    response:
      enabled: true
    
    jackson:
      enabled: true
      date-format: yyyy-MM-dd HH:mm:ss
      time-zone: GMT+8
    
    exception:
      enabled: true
      print-stack-trace: true
      include-stack-trace: true
    
    mybatis-plus:
      enabled: true
      pagination-enabled: true
      max-limit: 1000

# Swagger配置
springdoc:
  swagger-ui:
    enabled: true                     # 测试环境启用Swagger
  api-docs:
    enabled: true
```

---

## 配置优先级

配置加载优先级（从高到低）：

1. 命令行参数
2. 环境变量
3. `application-{profile}.yml`（特定环境配置）
4. `application.yml`（默认配置）
5. 代码中的默认值

---

## 安全建议

### 生产环境必须修改的配置

1. **JWT密钥**
   ```yaml
   siae.security.jwt.secret: ${JWT_SECRET_KEY}
   ```
   - 使用强随机字符串（至少32位）
   - 通过环境变量注入，不要硬编码

2. **网关密钥**
   ```yaml
   siae.auth.gateway-secret-key: ${GATEWAY_SECRET_KEY}
   siae.auth.internal-secret-key: ${INTERNAL_SECRET_KEY}
   ```
   - 使用强随机字符串
   - 定期轮换密钥

3. **关闭调试功能**
   ```yaml
   siae.web.exception.include-stack-trace: false
   siae.security.permission.log-enabled: false
   springdoc.swagger-ui.enabled: false
   ```

4. **启用网关认证**
   ```yaml
   siae.auth.enable-gateway-auth: true
   siae.auth.enable-direct-access: false
   ```

### 性能优化建议

1. **启用缓存**
   ```yaml
   siae.security.permission.cache-enabled: true
   siae.security.permission.redis-enabled: true
   ```

2. **合理设置超时时间**
   ```yaml
   siae.security.auth-service.connect-timeout: 3000
   siae.security.auth-service.read-timeout: 5000
   ```

3. **限制分页大小**
   ```yaml
   siae.web.mybatis-plus.max-limit: 500
   ```

---

## 三大认证功能详解

### 功能对比

| 功能 | 配置项 | 作用范围 | 主要功能 |
|------|--------|----------|----------|
| **安全功能** | `siae.security.enabled` | 整个安全模块 | 控制整个Spring Security安全框架是否启用 |
| **JWT认证** | `siae.security.jwt.enabled` | JWT令牌验证 | 控制是否验证JWT令牌和提取用户信息 |
| **网关认证** | `siae.auth.enable-gateway-auth` | 网关请求验证 | 控制是否验证请求来自网关（生产环境必须） |

### 详细说明

#### 1. 安全功能 (siae.security.enabled)

**作用：** 控制整个Spring Security安全框架是否启用

**启用时：**
- Spring Security过滤器链生效
- 所有请求都会经过安全检查
- 需要认证的接口会被拦截
- 权限注解 `@SiaeAuthorize` 生效

**禁用时：**
- Spring Security完全不工作
- 所有接口都可以直接访问
- 没有任何安全检查
- ⚠️ 生产环境绝对不能禁用

#### 2. JWT认证 (siae.security.jwt.enabled)

**作用：** 控制是否验证JWT令牌和提取用户信息

**启用时：**
- 从请求头 `Authorization: Bearer {token}` 中提取JWT
- 验证JWT的有效性（签名、过期时间等）
- 从JWT中提取用户ID和用户名
- 从Redis中查询用户的角色和权限
- 将用户信息和权限设置到Spring Security上下文

**禁用时：**
- 不会验证JWT令牌
- 不会提取用户信息
- 不会查询用户权限
- 但Spring Security仍然会检查是否已认证

#### 3. 网关认证 (siae.auth.enable-gateway-auth)

**作用：** 控制是否验证请求来自网关

**启用时：**
- 验证请求头中的网关签名
- 只接受来自网关的请求
- 直接访问微服务会被拒绝
- 生产环境必须启用

**禁用时：**
- 允许直接访问微服务
- 不验证网关签名
- 适合开发环境调试

### 三者关系

```
┌─────────────────────────────────────────────────────────┐
│ siae.security.enabled = true (安全功能总开关)              │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │ siae.security.jwt.enabled = true (JWT认证)       │    │
│  │                                                   │    │
│  │  - 验证JWT令牌                                     │    │
│  │  - 提取用户信息                                    │    │
│  │  - 查询用户权限                                    │    │
│  │  - 设置认证上下文                                  │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
│  ┌─────────────────────────────────────────────────┐    │
│  │ siae.auth.enable-gateway-auth = true (网关认证)  │    │
│  │                                                   │    │
│  │  - 验证网关签名                                    │    │
│  │  - 拒绝非网关请求                                  │    │
│  │  - 生产环境必须                                    │    │
│  └─────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────┘
```

---

## 快速测试配置

### 场景1：完全跳过认证和权限（最快速测试）

**需求：** 不想登录，不想带token，直接测试接口功能

**配置：**
```yaml
siae:
  security:
    enabled: false  # ⚠️ 关闭整个安全功能
```

**效果：**
- ✅ 所有接口都可以直接访问
- ✅ 不需要JWT token
- ✅ 不需要登录
- ✅ 权限注解完全失效
- ⚠️ 仅用于开发测试，生产环境绝对不能这样配置

**适用场景：**
- 快速测试接口功能
- 调试业务逻辑
- 开发初期

---

### 场景2：保留安全框架，但跳过JWT验证

**需求：** 保留Spring Security框架，但不验证JWT

**配置：**
```yaml
siae:
  security:
    enabled: true
    jwt:
      enabled: false  # 关闭JWT认证
    whitelist-paths:  # 将所有路径加入白名单
      - /**
```

**效果：**
- ✅ Spring Security框架仍然运行
- ✅ 所有路径在白名单中，不需要认证
- ✅ 不需要JWT token
- ⚠️ 权限注解仍然会检查，但因为没有认证信息会失败

**适用场景：**
- 需要保留安全框架的其他功能
- 测试白名单配置

---

### 场景3：允许直接访问微服务（跳过网关）

**需求：** 直接访问微服务，不通过网关

**配置：**
```yaml
siae:
  auth:
    enable-gateway-auth: false  # 关闭网关认证
    enable-direct-access: true  # 允许直接访问
  security:
    enabled: true
    jwt:
      enabled: true  # 仍然需要JWT
```

**效果：**
- ✅ 可以直接访问微服务（不通过网关）
- ⚠️ 仍然需要JWT token
- ⚠️ 仍然需要登录获取token
- ✅ 权限验证正常工作

**适用场景：**
- 开发环境调试
- 不想启动网关
- 需要测试权限功能

---

### 场景4：完整的开发环境配置（推荐）

**需求：** 开发环境，方便调试，但保留基本安全

**配置：**
```yaml
siae:
  auth:
    enable-gateway-auth: false  # 关闭网关认证
    enable-direct-access: true  # 允许直接访问
  
  security:
    enabled: true
    
    jwt:
      enabled: true
      access-token-expiration: 86400  # 24小时，避免频繁过期
    
    permission:
      log-enabled: true  # 启用权限日志，方便调试
    
    whitelist-paths:  # 扩展白名单
      - /api/v1/auth/**
      - /actuator/**
      - /swagger-ui/**
      - /v3/api-docs/**
      - /test/**  # 测试接口路径
```

**效果：**
- ✅ 可以直接访问微服务
- ✅ 白名单路径不需要认证
- ⚠️ 其他路径需要JWT token
- ✅ 权限验证正常工作
- ✅ 有详细的权限日志

**适用场景：**
- 日常开发
- 需要测试权限功能
- 需要调试认证流程

---

## 常见问题

### Q1: 我想快速测试接口，不想登录，应该怎么配置？

**最简单方案（完全关闭安全）：**
```yaml
siae:
  security:
    enabled: false
```

**推荐方案（保留框架，扩展白名单）：**
```yaml
siae:
  security:
    enabled: true
    whitelist-paths:
      - /**  # 所有路径都不需要认证
```

### Q2: 我想测试权限功能，但不想通过网关，怎么配置？

```yaml
siae:
  auth:
    enable-gateway-auth: false
    enable-direct-access: true
  security:
    enabled: true
    jwt:
      enabled: true
```

然后正常登录获取token，在请求头中携带：
```
Authorization: Bearer {your-token}
```

### Q3: 为什么关闭了JWT认证，接口还是返回401？

因为 `siae.security.enabled` 仍然是 `true`，Spring Security仍然会检查认证。

**解决方案1：** 完全关闭安全
```yaml
siae:
  security:
    enabled: false
```

**解决方案2：** 将路径加入白名单
```yaml
siae:
  security:
    whitelist-paths:
      - /api/v1/**  # 你要测试的路径
```

### Q4: 如何延长Token有效期？

```yaml
siae:
  security:
    jwt:
      access-token-expiration: 86400  # 24小时
      refresh-token-expiration: 2592000  # 30天
```

### Q5: 如何关闭Swagger文档？

```yaml
springdoc:
  swagger-ui:
    enabled: false
  api-docs:
    enabled: false
```

### Q6: 如何启用权限日志？

```yaml
siae:
  security:
    permission:
      log-enabled: true
    enhanced-permission:
      detailed-logging: true
```

### Q7: 如何自定义白名单路径？

```yaml
siae:
  security:
    whitelist-paths:
      - /api/v1/auth/login
      - /api/v1/auth/register
      - /public/**
      - /health
      - /test/**  # 添加你的测试路径
```

### Q8: 生产环境必须修改哪些配置？

```yaml
siae:
  auth:
    enable-gateway-auth: true  # ✅ 必须启用
    enable-direct-access: false  # ✅ 必须禁用
    gateway-secret-key: ${GATEWAY_SECRET_KEY}  # ✅ 必须修改
  
  security:
    enabled: true  # ✅ 必须启用
    jwt:
      enabled: true  # ✅ 必须启用
      secret: ${JWT_SECRET_KEY}  # ✅ 必须修改
    permission:
      log-enabled: false  # ✅ 建议关闭
```

---

## 更新日志

### v1.0 (2024-11-13)
- ✅ 初始版本
- ✅ 完整的配置项说明
- ✅ 开发、测试、生产环境配置示例
- ✅ 安全建议和性能优化建议
- ✅ 常见问题解答
